version: "0.3.0"

includes:
  - url: "https://github.com/xtfc/std.mold"

recipes:
  init:
    help: "Initialize Terraform"
    type: "sh"
    script: |
      terraform $TF_ARGS init $TF_INIT_ARGS

  plan:
    help: "Generate a Terraform plan"
    type: "sh"
    script: |
      terraform $TF_ARGS plan $TF_PLAN_ARGS

  apply:
    help: "Apply Terraform"
    type: "sh"
    script: |
      terraform $TF_ARGS apply $TF_APPLY_ARGS

  destroy:
    help: "Destroy Terraform"
    type: "sh"
    script: |
      terraform $TF_ARGS destroy $TF_DESTROY_ARGS

  fmt:
    help: "Run Terraform's autoformatter"
    type: "sh"
    script: |
      terraform $TF_ARGS fmt $TF_FMT_ARGS

  fmtcheck:
    help: "Run Terraform's autoformatter check"
    command: ["terraform", "fmt", "-check"]
    type: "sh"
    script: |
      terraform $TF_ARGS fmt -check $TF_FMTCHECK_ARGS
